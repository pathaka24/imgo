{"ast":null,"code":"import ReactExports, { useRef, useCallback, useEffect, useMemo, useDebugValue } from 'react';\nimport { isChanged, createProxy, affectedToPathList } from 'proxy-compare';\nimport useSyncExternalStoreExports from 'use-sync-external-store/shim/index.js';\nimport { subscribe, snapshot } from 'valtio/vanilla';\nconst {\n  use\n} = ReactExports;\nconst {\n  useSyncExternalStore\n} = useSyncExternalStoreExports;\nconst useAffectedDebugValue = (state, affected) => {\n  const pathList = useRef();\n  useEffect(() => {\n    pathList.current = affectedToPathList(state, affected, true);\n  });\n  useDebugValue(pathList.current);\n};\nconst targetCache = /* @__PURE__ */new WeakMap();\nfunction useSnapshot(proxyObject, options) {\n  const notifyInSync = options == null ? void 0 : options.sync;\n  const lastSnapshot = useRef();\n  const lastAffected = useRef();\n  let inRender = true;\n  const currSnapshot = useSyncExternalStore(useCallback(callback => {\n    const unsub = subscribe(proxyObject, callback, notifyInSync);\n    callback();\n    return unsub;\n  }, [proxyObject, notifyInSync]), () => {\n    const nextSnapshot = snapshot(proxyObject, use);\n    try {\n      if (!inRender && lastSnapshot.current && lastAffected.current && !isChanged(lastSnapshot.current, nextSnapshot, lastAffected.current, /* @__PURE__ */new WeakMap())) {\n        return lastSnapshot.current;\n      }\n    } catch (e) {}\n    return nextSnapshot;\n  }, () => snapshot(proxyObject, use));\n  inRender = false;\n  const currAffected = /* @__PURE__ */new WeakMap();\n  useEffect(() => {\n    lastSnapshot.current = currSnapshot;\n    lastAffected.current = currAffected;\n  });\n  if ((import.meta.env && import.meta.env.MODE) !== \"production\") {\n    useAffectedDebugValue(currSnapshot, currAffected);\n  }\n  const proxyCache = useMemo(() => /* @__PURE__ */new WeakMap(), []);\n  return createProxy(currSnapshot, currAffected, proxyCache, targetCache);\n}\nexport { useSnapshot };","map":{"version":3,"names":["ReactExports","useRef","useCallback","useEffect","useMemo","useDebugValue","isChanged","createProxy","affectedToPathList","useSyncExternalStoreExports","subscribe","snapshot","use","useSyncExternalStore","useAffectedDebugValue","state","affected","pathList","current","targetCache","WeakMap","useSnapshot","proxyObject","options","notifyInSync","sync","lastSnapshot","lastAffected","inRender","currSnapshot","callback","unsub","nextSnapshot","e","currAffected","import","meta","env","MODE","proxyCache"],"sources":["D:/productionApp/imgo/node_modules/valtio/esm/react.mjs"],"sourcesContent":["import ReactExports, { useRef, useCallback, useEffect, useMemo, useDebugValue } from 'react';\nimport { isChanged, createProxy, affectedToPathList } from 'proxy-compare';\nimport useSyncExternalStoreExports from 'use-sync-external-store/shim/index.js';\nimport { subscribe, snapshot } from 'valtio/vanilla';\n\nconst { use } = ReactExports;\nconst { useSyncExternalStore } = useSyncExternalStoreExports;\nconst useAffectedDebugValue = (state, affected) => {\n  const pathList = useRef();\n  useEffect(() => {\n    pathList.current = affectedToPathList(state, affected, true);\n  });\n  useDebugValue(pathList.current);\n};\nconst targetCache = /* @__PURE__ */ new WeakMap();\nfunction useSnapshot(proxyObject, options) {\n  const notifyInSync = options == null ? void 0 : options.sync;\n  const lastSnapshot = useRef();\n  const lastAffected = useRef();\n  let inRender = true;\n  const currSnapshot = useSyncExternalStore(\n    useCallback(\n      (callback) => {\n        const unsub = subscribe(proxyObject, callback, notifyInSync);\n        callback();\n        return unsub;\n      },\n      [proxyObject, notifyInSync]\n    ),\n    () => {\n      const nextSnapshot = snapshot(proxyObject, use);\n      try {\n        if (!inRender && lastSnapshot.current && lastAffected.current && !isChanged(\n          lastSnapshot.current,\n          nextSnapshot,\n          lastAffected.current,\n          /* @__PURE__ */ new WeakMap()\n        )) {\n          return lastSnapshot.current;\n        }\n      } catch (e) {\n      }\n      return nextSnapshot;\n    },\n    () => snapshot(proxyObject, use)\n  );\n  inRender = false;\n  const currAffected = /* @__PURE__ */ new WeakMap();\n  useEffect(() => {\n    lastSnapshot.current = currSnapshot;\n    lastAffected.current = currAffected;\n  });\n  if ((import.meta.env && import.meta.env.MODE) !== \"production\") {\n    useAffectedDebugValue(currSnapshot, currAffected);\n  }\n  const proxyCache = useMemo(() => /* @__PURE__ */ new WeakMap(), []);\n  return createProxy(\n    currSnapshot,\n    currAffected,\n    proxyCache,\n    targetCache\n  );\n}\n\nexport { useSnapshot };\n"],"mappings":"AAAA,OAAOA,YAAY,IAAIC,MAAM,EAAEC,WAAW,EAAEC,SAAS,EAAEC,OAAO,EAAEC,aAAa,QAAQ,OAAO;AAC5F,SAASC,SAAS,EAAEC,WAAW,EAAEC,kBAAkB,QAAQ,eAAe;AAC1E,OAAOC,2BAA2B,MAAM,uCAAuC;AAC/E,SAASC,SAAS,EAAEC,QAAQ,QAAQ,gBAAgB;AAEpD,MAAM;EAAEC;AAAI,CAAC,GAAGZ,YAAY;AAC5B,MAAM;EAAEa;AAAqB,CAAC,GAAGJ,2BAA2B;AAC5D,MAAMK,qBAAqB,GAAGA,CAACC,KAAK,EAAEC,QAAQ,KAAK;EACjD,MAAMC,QAAQ,GAAGhB,MAAM,CAAC,CAAC;EACzBE,SAAS,CAAC,MAAM;IACdc,QAAQ,CAACC,OAAO,GAAGV,kBAAkB,CAACO,KAAK,EAAEC,QAAQ,EAAE,IAAI,CAAC;EAC9D,CAAC,CAAC;EACFX,aAAa,CAACY,QAAQ,CAACC,OAAO,CAAC;AACjC,CAAC;AACD,MAAMC,WAAW,GAAG,eAAgB,IAAIC,OAAO,CAAC,CAAC;AACjD,SAASC,WAAWA,CAACC,WAAW,EAAEC,OAAO,EAAE;EACzC,MAAMC,YAAY,GAAGD,OAAO,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,OAAO,CAACE,IAAI;EAC5D,MAAMC,YAAY,GAAGzB,MAAM,CAAC,CAAC;EAC7B,MAAM0B,YAAY,GAAG1B,MAAM,CAAC,CAAC;EAC7B,IAAI2B,QAAQ,GAAG,IAAI;EACnB,MAAMC,YAAY,GAAGhB,oBAAoB,CACvCX,WAAW,CACR4B,QAAQ,IAAK;IACZ,MAAMC,KAAK,GAAGrB,SAAS,CAACY,WAAW,EAAEQ,QAAQ,EAAEN,YAAY,CAAC;IAC5DM,QAAQ,CAAC,CAAC;IACV,OAAOC,KAAK;EACd,CAAC,EACD,CAACT,WAAW,EAAEE,YAAY,CAC5B,CAAC,EACD,MAAM;IACJ,MAAMQ,YAAY,GAAGrB,QAAQ,CAACW,WAAW,EAAEV,GAAG,CAAC;IAC/C,IAAI;MACF,IAAI,CAACgB,QAAQ,IAAIF,YAAY,CAACR,OAAO,IAAIS,YAAY,CAACT,OAAO,IAAI,CAACZ,SAAS,CACzEoB,YAAY,CAACR,OAAO,EACpBc,YAAY,EACZL,YAAY,CAACT,OAAO,EACpB,eAAgB,IAAIE,OAAO,CAAC,CAC9B,CAAC,EAAE;QACD,OAAOM,YAAY,CAACR,OAAO;MAC7B;IACF,CAAC,CAAC,OAAOe,CAAC,EAAE,CACZ;IACA,OAAOD,YAAY;EACrB,CAAC,EACD,MAAMrB,QAAQ,CAACW,WAAW,EAAEV,GAAG,CACjC,CAAC;EACDgB,QAAQ,GAAG,KAAK;EAChB,MAAMM,YAAY,GAAG,eAAgB,IAAId,OAAO,CAAC,CAAC;EAClDjB,SAAS,CAAC,MAAM;IACduB,YAAY,CAACR,OAAO,GAAGW,YAAY;IACnCF,YAAY,CAACT,OAAO,GAAGgB,YAAY;EACrC,CAAC,CAAC;EACF,IAAI,CAACC,MAAM,CAACC,IAAI,CAACC,GAAG,IAAIF,MAAM,CAACC,IAAI,CAACC,GAAG,CAACC,IAAI,MAAM,YAAY,EAAE;IAC9DxB,qBAAqB,CAACe,YAAY,EAAEK,YAAY,CAAC;EACnD;EACA,MAAMK,UAAU,GAAGnC,OAAO,CAAC,MAAM,eAAgB,IAAIgB,OAAO,CAAC,CAAC,EAAE,EAAE,CAAC;EACnE,OAAOb,WAAW,CAChBsB,YAAY,EACZK,YAAY,EACZK,UAAU,EACVpB,WACF,CAAC;AACH;AAEA,SAASE,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}