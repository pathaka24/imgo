{"ast":null,"code":"import*as THREE from'three';import{useRef,useState}from'react';import{Canvas,useFrame,useThree}from'@react-three/fiber';import{Image,ScrollControls,Scroll,useScroll}from'@react-three/drei';import{proxy,useSnapshot}from'valtio';import{easing}from'maath';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const material=new THREE.LineBasicMaterial({color:'white'});const geometry=new THREE.BufferGeometry().setFromPoints([new THREE.Vector3(0,-0.5,0),new THREE.Vector3(0,0.5,0)]);const state=proxy({clicked:null,urls:[1,2,3,4,5,6,7,8,9,10,11,12,1,5,7,8,2,4,9,6].map(u=>\"/\".concat(u,\".jpg\"))});function Minimap(){const ref=useRef();const scroll=useScroll();const{urls}=useSnapshot(state);const{height}=useThree(state=>state.viewport);useFrame((state,delta)=>{ref.current.children.forEach((child,index)=>{// Give me a value between 0 and 1\n//   starting at the position of my item\n//   ranging across 4 / total length\n//   make it a sine, so the value goes from 0 to 1 to 0.\nconst y=scroll.curve(index/urls.length-1.5/urls.length,4/urls.length);easing.damp(child.scale,'y',0.15+y/6,0.15,delta);});});return/*#__PURE__*/_jsx(\"group\",{ref:ref,children:urls.map((_,i)=>/*#__PURE__*/_jsx(\"line\",{geometry:geometry,material:material,position:[i*0.06-urls.length*0.03,-height/2+0.6,0]},i))});}function Item(_ref){let{index,position,scale,c=new THREE.Color(),...props}=_ref;const ref=useRef();const scroll=useScroll();const{clicked,urls}=useSnapshot(state);const[hovered,hover]=useState(false);const click=()=>state.clicked=index===clicked?null:index;const over=()=>hover(true);const out=()=>hover(false);useFrame((state,delta)=>{const y=scroll.curve(index/urls.length-1.5/urls.length,4/urls.length);easing.damp3(ref.current.scale,[clicked===index?4.7:scale[0],clicked===index?5:4+y,1],0.15,delta);ref.current.material.scale[0]=ref.current.scale.x;ref.current.material.scale[1]=ref.current.scale.y;if(clicked!==null&&index<clicked)easing.damp(ref.current.position,'x',position[0]-2,0.15,delta);if(clicked!==null&&index>clicked)easing.damp(ref.current.position,'x',position[0]+2,0.15,delta);if(clicked===null||clicked===index)easing.damp(ref.current.position,'x',position[0],0.15,delta);easing.damp(ref.current.material,'grayscale',hovered||clicked===index?0:Math.max(0,1-y),0.15,delta);easing.dampC(ref.current.material.color,hovered||clicked===index?'white':'#aaa',hovered?0.3:0.15,delta);});return/*#__PURE__*/_jsx(Image,{ref:ref,...props,position:position,scale:scale,onClick:click,onPointerOver:over,onPointerOut:out});}function Items(_ref2){let{w=0.7,gap=0.15}=_ref2;const{urls}=useSnapshot(state);const{width}=useThree(state=>state.viewport);const xW=w+gap;return/*#__PURE__*/_jsxs(ScrollControls,{horizontal:true,damping:0.1,pages:(width-xW+urls.length*xW)/width,children:[/*#__PURE__*/_jsx(Minimap,{}),/*#__PURE__*/_jsx(Scroll,{children:urls.map((url,i)=>/*#__PURE__*/_jsx(Item,{index:i,position:[i*xW,0,0],scale:[w,4,1],url:url},i))/* prettier-ignore */})]});}export const App=()=>/*#__PURE__*/_jsx(Canvas,{gl:{antialias:false},dpr:[1,1.5],onPointerMissed:()=>state.clicked=null,children:/*#__PURE__*/_jsx(Items,{})});","map":{"version":3,"names":["THREE","useRef","useState","Canvas","useFrame","useThree","Image","ScrollControls","Scroll","useScroll","proxy","useSnapshot","easing","jsx","_jsx","jsxs","_jsxs","material","LineBasicMaterial","color","geometry","BufferGeometry","setFromPoints","Vector3","state","clicked","urls","map","u","concat","Minimap","ref","scroll","height","viewport","delta","current","children","forEach","child","index","y","curve","length","damp","scale","_","i","position","Item","_ref","c","Color","props","hovered","hover","click","over","out","damp3","x","Math","max","dampC","onClick","onPointerOver","onPointerOut","Items","_ref2","w","gap","width","xW","horizontal","damping","pages","url","App","gl","antialias","dpr","onPointerMissed"],"sources":["D:/productionApp/imgo/src/App.js"],"sourcesContent":["import * as THREE from 'three'\nimport { useRef, useState } from 'react'\nimport { Canvas, useFrame, useThree } from '@react-three/fiber'\nimport { Image, ScrollControls, Scroll, useScroll } from '@react-three/drei'\nimport { proxy, useSnapshot } from 'valtio'\nimport { easing } from 'maath'\n\nconst material = new THREE.LineBasicMaterial({ color: 'white' })\nconst geometry = new THREE.BufferGeometry().setFromPoints([new THREE.Vector3(0, -0.5, 0), new THREE.Vector3(0, 0.5, 0)])\nconst state = proxy({\n  clicked: null,\n  urls: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 1, 5, 7, 8, 2, 4, 9, 6].map((u) => `/${u}.jpg`)\n})\n\nfunction Minimap() {\n  const ref = useRef()\n  const scroll = useScroll()\n  const { urls } = useSnapshot(state)\n  const { height } = useThree((state) => state.viewport)\n  useFrame((state, delta) => {\n    ref.current.children.forEach((child, index) => {\n      // Give me a value between 0 and 1\n      //   starting at the position of my item\n      //   ranging across 4 / total length\n      //   make it a sine, so the value goes from 0 to 1 to 0.\n      const y = scroll.curve(index / urls.length - 1.5 / urls.length, 4 / urls.length)\n      easing.damp(child.scale, 'y', 0.15 + y / 6, 0.15, delta)\n    })\n  })\n  return (\n    <group ref={ref}>\n      {urls.map((_, i) => (\n        <line key={i} geometry={geometry} material={material} position={[i * 0.06 - urls.length * 0.03, -height / 2 + 0.6, 0]} />\n      ))}\n    </group>\n  )\n}\n\nfunction Item({ index, position, scale, c = new THREE.Color(), ...props }) {\n  const ref = useRef()\n  const scroll = useScroll()\n  const { clicked, urls } = useSnapshot(state)\n  const [hovered, hover] = useState(false)\n  const click = () => (state.clicked = index === clicked ? null : index)\n  const over = () => hover(true)\n  const out = () => hover(false)\n  useFrame((state, delta) => {\n    const y = scroll.curve(index / urls.length - 1.5 / urls.length, 4 / urls.length)\n    easing.damp3(ref.current.scale, [clicked === index ? 4.7 : scale[0], clicked === index ? 5 : 4 + y, 1], 0.15, delta)\n    ref.current.material.scale[0] = ref.current.scale.x\n    ref.current.material.scale[1] = ref.current.scale.y\n    if (clicked !== null && index < clicked) easing.damp(ref.current.position, 'x', position[0] - 2, 0.15, delta)\n    if (clicked !== null && index > clicked) easing.damp(ref.current.position, 'x', position[0] + 2, 0.15, delta)\n    if (clicked === null || clicked === index) easing.damp(ref.current.position, 'x', position[0], 0.15, delta)\n    easing.damp(ref.current.material, 'grayscale', hovered || clicked === index ? 0 : Math.max(0, 1 - y), 0.15, delta)\n    easing.dampC(ref.current.material.color, hovered || clicked === index ? 'white' : '#aaa', hovered ? 0.3 : 0.15, delta)\n  })\n  return <Image ref={ref} {...props} position={position} scale={scale} onClick={click} onPointerOver={over} onPointerOut={out} />\n}\n\nfunction Items({ w = 0.7, gap = 0.15 }) {\n  const { urls } = useSnapshot(state)\n  const { width } = useThree((state) => state.viewport)\n  const xW = w + gap\n  return (\n    <ScrollControls horizontal damping={0.1} pages={(width - xW + urls.length * xW) / width}>\n      <Minimap />\n      <Scroll>\n        {urls.map((url, i) => <Item key={i} index={i} position={[i * xW, 0, 0]} scale={[w, 4, 1]} url={url} />) /* prettier-ignore */}\n      </Scroll>\n    </ScrollControls>\n  )\n}\n\nexport const App = () => (\n  <Canvas gl={{ antialias: false }} dpr={[1, 1.5]} onPointerMissed={() => (state.clicked = null)}>\n    <Items />\n  </Canvas>\n)\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}